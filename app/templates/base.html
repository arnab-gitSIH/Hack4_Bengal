<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@popperjs/core@2"></script>
    <script src="https://unpkg.com/tippy.js@6"></script>
</head>
<body class="bg-gray-100 font-sans">

    <!-- Top Navbar -->
    <div class="flex justify-between items-center px-6 py-4 bg-white shadow">
        <h1 class="text-2xl font-bold text-indigo-600">Flat Maintenance Tracker</h1>

        <!-- Profile Icon -->
        <div class="relative">
            <button id="profileBtn" class="flex items-center space-x-2 focus:outline-none">
                <img src="https://img.icons8.com/ios-filled/50/user.png" class="w-8 h-8" alt="Profile Icon">
            </button>
            <div id="profileMenu" class="hidden absolute right-0 mt-2 w-48 bg-white border rounded-lg shadow-lg z-50">
                <div class="px-4 py-2 text-sm text-gray-700">
                    Logged in as:<br>
                    <strong>{{ session['user_email'] }}</strong>
                </div>
                <div class="border-t"></div>
                <a href="{{ url_for('main.logout') }}" class="block px-4 py-2 text-sm text-red-600 hover:bg-gray-100">
                    Logout
                </a>
            </div>
        </div>
    </div>

    <!-- Content Goes Here -->
    <div class="p-6">
        {% block content %}{% endblock %}
    </div>

    <script>
        const btn = document.getElementById('profileBtn');
        const menu = document.getElementById('profileMenu');
        btn.addEventListener('click', () => {
            menu.classList.toggle('hidden');
        });
    </script>
</body>
</html>